<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>L·ªùi ch√∫c üéÑ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle,#102a43,#07121f);
    overflow: hidden;
  }

  canvas {
    position: fixed;
    inset: 0;
    pointer-events: none;
    z-index: 1;
  }
  
  .note {
    position: fixed;
    top: 50%;
    left: 50%;
    width: 340px;
    height: 480px;

    background: url('note.png') center/contain no-repeat;
    background-color: rgba(255,255,255,0.85);

    transform: translate(-50%, -50%) scale(0.9);
    opacity: 1;

    padding: 110px 40px 40px;
    box-sizing: border-box;

    color: #3b2f2f;
    font-family: 'Segoe Print', cursive;
    font-size: 18px;
    line-height: 1.7;
    text-align: center;

    z-index: 50;

    border-radius: 12px;
    box-shadow:
      0 0 0 6px rgba(255,255,255,0.25),
      0 30px 60px rgba(0,0,0,0.6);
  }

  .note.show {
    transform: translate(-50%, -50%) scale(1);
    opacity: 1;
  }

  .santa {
    position: fixed;
    bottom: 40px;
    right: -300px;
    font-size: 52px;
    z-index: 10;

    filter: drop-shadow(0 6px 8px rgba(0,0,0,0.6));

    animation: santaMove 28s linear infinite;
    pointer-events: none;
  }

  @keyframes santaMove {
    0%   { transform: translate(0, 0); }
    50%  { transform: translate(-60vw, -10px); }
    100% { transform: translate(-130vw, 0); }
  }

  .back-btn {
    margin-top: 20px;
    padding: 8px 16px;
    border: none;
    border-radius: 20px;
    background: #c0392b;
    color: #fff;
    font-size: 14px;
    cursor: pointer;
    box-shadow: 0 4px 10px rgba(0,0,0,0.4);
  }

  .back-btn:hover {
    background: #e74c3c;
  }

</style>
</head>
<body>

<canvas id="fw"></canvas>

<div class="note" id="note">
  <div id="noteText"></div>

  <button class="back-btn" onclick="goBack()">‚¨Ö Quay l·∫°i</button>
</div>

<script>
const canvas = document.getElementById("fw");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

let fireworks = [];
let particles = [];

// ===== ROCKET =====
class Firework {
  constructor() {
    this.x = Math.random() * canvas.width;
    this.y = canvas.height;
    this.vx = (Math.random() - 0.5) * 1.2;
    this.vy = - (Math.random() * 5 + 7);
    this.color = `hsl(${Math.random()*360},100%,70%)`;
    this.life = Math.random() * 40 + 60;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.05; // tr·ªçng l·ª±c
    this.life--;

    // ƒëu√¥i s√°ng
    ctx.beginPath();
    ctx.arc(this.x, this.y, 2, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.fill();

    if (this.life <= 0) {
      this.explode();
      return false;
    }
    return true;
  }

  explode() {
    for (let i = 0; i < 60; i++) {
      particles.push(new Particle(this.x, this.y, this.color));
    }
  }
}

// ===== H·∫†T N·ªî =====
class Particle {
  constructor(x, y, color) {
    this.x = x;
    this.y = y;
    this.vx = (Math.random() - 0.5) * 6;
    this.vy = (Math.random() - 0.5) * 6;
    this.alpha = 1;
    this.color = color;
  }

  update() {
    this.x += this.vx;
    this.y += this.vy;
    this.vy += 0.05;
    this.alpha -= 0.015;

    ctx.beginPath();
    ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
    ctx.fillStyle = this.color.replace(")", `,${this.alpha})`).replace("hsl", "hsla");
    ctx.fill();

    return this.alpha > 0;
  }
}

// ===== LOOP =====
function animate() {
  // ph·ªß l·ªõp ƒëen m·ªù ƒë·ªÉ t·∫°o ƒëu√¥i s√°ng
  ctx.fillStyle = "rgba(0,0,0,0.35)";
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  fireworks = fireworks.filter(f => f.update());
  particles = particles.filter(p => p.update());

  // b·∫Øn li√™n t·ª•c (ch·∫≠m)
  if (Math.random() < 0.04) {
    fireworks.push(new Firework());
  }

  requestAnimationFrame(animate);
}

window.onload = () => {
  document.getElementById("note").classList.add("show");
  typeText();
  animate(); // ph√°o hoa
};

window.onresize = () => {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
};
const lines = [
  "üéÑ Merry Christmas üéÑ",
  "",
  "Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng Sinh th·∫≠t ·∫•m √°p,",
  "nhi·ªÅu ni·ªÅm vui v√† h·∫°nh ph√∫c",
  "b√™n nh·ªØng ng∆∞·ªùi b·∫°n y√™u th∆∞∆°ng ‚ú®"
];

const noteText = document.getElementById("noteText");
const lines = [
  "üéÑ Merry Christmas üéÑ",
  "",
  "Ch√∫c b·∫°n m·ªôt m√πa Gi√°ng Sinh th·∫≠t ·∫•m √°p,",
  "nhi·ªÅu ni·ªÅm vui v√† h·∫°nh ph√∫c",
  "b√™n nh·ªØng ng∆∞·ªùi b·∫°n y√™u th∆∞∆°ng ‚ú®"
];

const noteText = document.getElementById("noteText");

let line = 0;
let char = 0;

function typeText() {
  if (line >= lines.length) return;

  if (!noteText.children[line]) {
    const div = document.createElement("div");
    noteText.appendChild(div);
  }

  const currentLine = lines[line];
  noteText.children[line].innerHTML =
    currentLine.substring(0, char) + "<span>|</span>";

  char++;

  if (char > currentLine.length) {
    noteText.children[line].innerHTML = currentLine;
    line++;
    char = 0;
    setTimeout(typeText, 400); // ngh·ªâ gi·ªØa c√°c d√≤ng
  } else {
    setTimeout(typeText, 45); // t·ªëc ƒë·ªô g√µ
  }
}

function goBack() {
  window.location.href = "index.html#action";
}

</script>
<div class="santa">üéÖü¶åü¶åüõ∑</div>

</body>
</html>
